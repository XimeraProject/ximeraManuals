\documentclass{ximera}

\input{../preamble}

\title{Set up a GitHub repository}

\author{Bart Snapp}

\begin{document}
\begin{abstract}
  How to set up your Ximera files in GitHub.
\end{abstract}
\maketitle

\paragraph{All Ximera files must be hosted in a git repository} To deploy, you
will also need	additional
files found in \verb!ximeraFirstSteps!. You have two choices when creating new
content:
\begin{itemize}
  \item If you are \textbf{starting fresh}, fork the \texttt{ximeraFirstSteps}
        repository.
  \item If you are starting with an \textbf{existing a git repository}, that is
        not currently deploying Ximera content, move files
        from \texttt{ximeraFirstSteps} to this repository.
\end{itemize}
We'll address each of these methods in-turn below.
% See the \link[git manual]{http://git-scm.com} for more information about the
% \verb!clone! and \verb!fork! commands.

\section{Starting fresh and forking \texttt{ximeraFirstSteps}}

Forking a repository is well-documented on
\link[GitHub]{https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/fork-a-repo}.
Basically, you login to GitHub, return to this page, and at the top right there
will be an option to \textbf{fork} this repository. Fork the repo. Accept all
defaults, though you might want to change the name of the repository at this
point. When done, it will take you to
your copy of this repository on GitHub. It will be located someplace like:
\begin{center}
  \texttt{https://github.com/YOUR-GIT-USER-NAME/your-new-repo-name}
\end{center}
Once the repository is forked, clone the forked repository (the one in your
user-space) onto your computer. \textbf{If you are using Windows, be sure to
  clone through WSL.}
After the repository is on your computer, delete all files \textbf{except:}
\begin{itemize}
  \item \texttt{.gitignore}
  \item \texttt{DOTximeraserve}
  \item \texttt{.vscode}
  \item \texttt{scripts}
  \item \texttt{.git}
  \item \texttt{README.md}
  \item \texttt{NOT-THE-LICENSE.md}
\end{itemize}
You must keep the files above.	Typically we advise the CC BY-NC-SA 4.0
License; however, you do you.
Commit your changes to GitHub and view your
repository online via a web browser to ensure that the files were deleted.

\section{Starting from an existing GitHub repository}

Starting from an existing GitHub repository, you will need to \textbf{copy}
\begin{itemize}
  \item \texttt{.gitignore}
  \item \texttt{.vscode}
  \item \texttt{scripts}
  \item \texttt{NOT-THE-LICENSE.md} (only if you don't already have a license)
\end{itemize}
into your repository. If you already have a \verb|.gitignore| file, we suggest
you replace yours with ours. Commit your changes to GitHub and view your
repository online via a web browser to ensure that the files were added.

Typically we advise the CC BY-NC-SA 4.0 License; however, you do you.
Finally, after the \verb!.gitignore! is pushed to the repository, copy
\verb!.ximerserve! to your repository.

\section{Setting up a Ximera \texttt{xourse}}

Ximera documents can be \textit{glued} together using the \texttt{xourse}
document
class.
A \verb|xourse| file is basically a list of other \verb|ximera| files and even
other \verb|xourse| files.
The \verb|xourse| file for \textit{A First Step in Ximera} can be found here is
\verb!aFirstStepInXimera.tex!, found in the \verb!ximeraFirstSteps! repository.
The \verb!xourse! documentclass specifies information such as the name of the
document, the names fo the authors, a description of the content, a license and
the names of all Ximera \LaTeX\ files comprising
the whole document.

\begin{warning}
  All document and folder names used for Ximera must be web-safe! This means
  all document and folder names:
  \begin{description}
    \item[Must only use alphanumeric English characters] Meaning: a,b, \dots,
      z, A,B, \dots, Z, 0,1, \dots, 9, and hyphen `-' and underscore `\_'
      though the
      last two are discouraged.
    \item[Cannot use use any other characters, including spaces] This means all
      Ximera documents and folders file names must be a single word.
  \end{description}
  This is not a limitation of Ximera, rather it is a rule that nearly all
  web-accessible documents must follow.
\end{warning}

\section{File structure}

While one can write a Ximera document without the use of folders, this quickly
turns into a mess that is difficult to understand and should only be used for
the most basic Ximera content.
To help others (including your future-self) work with larger projects, you
should have a file structure
that helps developers understand where content is stored. We recommend the
following:
\begin{description}
  \item[Group by concept] by having all documents that are closely related in
    idea
    or scope in the same folder. If someone else wants to use your content,
    this will be a one-stop destination for them.
  \item[Descriptive file names] will help you and others understand the
    structure of your repository. Give you documents descriptive file names like:
    \verb!completeTheSquare.tex! or \verb!derivativeRules.tex! rather than
    generic
    names like: \sout{\texttt{chapter1.tex}}, or
    \sout{\texttt{math872ch2sec3.tex}}. Authors find themselves reordering
    their content and generic names are useless for other users.
\end{description}

For the repository \texttt{ximeraFirstSteps} we have the following structure:
\begin{center}%%DIAGRAM OF FILE STRUCTURE
  \scalebox{.7}{
    \begin{tikzpicture}
      % Define styles for nodes
      \tikzstyle{document} = [anchor=north west,draw, rounded corners,
      rectangle,
      minimum width=3cm,fill=white, minimum height=.8cm, ultra
      thick,font=\ttfamily]
      \tikzstyle{folder} = [anchor=north west,draw, rectangle, rounded corners,
      minimum width=4cm,fill=white, minimum height=2.8cm, ultra
      thick,font=\ttfamily]

      % Thick grey lines
      \draw[line width=200pt,white!85!black,line cap=round] (2,1) -- (2,-3.5);
      \draw[line width=200pt,white!85!black,line cap=round] (10,1) --(10,-3.5);

      % Connections
      \draw[ultra thick] (2,-1.5) -- (8,2.6);
      \draw[ultra thick] (2,-1.5) -- (8,1.6);
      \draw[ultra thick] (2,-1.5) -- (8,.6);

      \draw[ultra thick] (2,-3.5) -- (8,-.4);
      \draw[ultra thick] (2,-3.5) -- (8,-1.4);
      \draw[ultra thick] (2,-3.5) -- (8,-2.4);
      \draw[ultra thick] (2,-3.5) -- (8,-3.4);
      \draw[ultra thick] (2,-3.5) -- (8,-4.4);
      \draw[ultra thick] (2,-3.5) -- (8,-5.4);

      % Symbols at top
      \node at (2,3.5) {\Large\bf\sffamily  Top Level};
      \node at (10,3.5) {\Large\bf\sffamily Sub Level};

      % Define the folders at top level
      \node[document] at (0,3) {preamble.tex};
      \node[document] at (0,2) {aFirstStepInXimera.tex};
      \node[folder] at (0,1) {basics};
      \node[] at (2,-1) {(folder)};
      \node[folder] at (0,-2) {exercises};
      \node[] at (2,-4) {(folder)};

      % Define the documents in the basics folder
      \node[document] at (8,3) {basicWorksheet.tex};
      \node[document] at (8,2) {missionPatch.jpg};
      \node[document] at (8,1) {graphicsInteractives.tex};

      % Define the documents in the exercises folder
      \node[document] at (8,0) {exerciseList.tex};
      \node[document] at (8,-1) {answer.tex};
      \node[document] at (8,-2) {multipleChoice.tex};
      \node[document] at (8,-3) {selectAll.tex};
      \node[document] at (8,-4) {wordChoice.tex};
      \node[document] at (8,-5) {hintsAndFollowUp.tex};

    \end{tikzpicture}}
\end{center}
We've left some files out of this diagram; regardless, you should be able to
goto
\begin{center}
  \url{https://github.com/ximeraProject/ximeraFirstSteps}
\end{center}
and witness this file structure. At the top level of the repository, we have
the documents \verb!preamble.tex! and \verb!aFirstStepInXimera.tex! along with
the folders \verb!basics! and \verb!exercises!. Inside \verb!basics!, we have
two activities and a JPG that is required by one of them. Inside
\verb!exercises!
we have all the practice exercises.
Ideally a document's parent folder would contain everything that document needs
to compile, except for perhaps the preamble, and we address this below.

A consistent and well thought out set up will allow you and others to easily
understand and modify your
content for years to come.

\begin{warning}
  Every \verb!*.tex! file in the repository with a \verb!\documentclass!
  \textbf{must} compile for online deployment.
\end{warning}

\section{Including with \texttt{\textbackslash activity} and
  \texttt{\textbackslash practice}}

Once you have some files and a basic directory structure, you can add them to
the \verb!xourse! document.

\begin{warning}
  The \verb!xourse! document will only be easily accessible online if it
  contains a title,
  abstract, and {\tt\textbackslash maketitle} command.

  If a \verb!xourse! does not contain a title, abstract, and {\tt\textbackslash
      maketitle} it will still be deployed but you will need to know the path
  to the
  file. It will be something like:
  \begin{center}
    \tt https://ximera.osu.edu/YOUR-COURSE-NAME/PATH-TO-YOUR-FILE
  \end{center}
  It is important that there is no trailing `/' as
  \begin{itemize}
    \item \url{https://ximera.osu.edu/moooculus} is correct but
    \item \sout{\url{https://ximera.osu.edu/moooculus/}} is not.
  \end{itemize}
\end{warning}

There are two different commands we use to add
\verb!ximera! documents to a \verb!xourse! file:
\begin{description}
  \item[\tt\bfseries\textbackslash activity] is for including Ximera documents
    that
    \textbf{include a title,
      abstract, and \tt\bfseries\textbackslash maketitle}. They will be
    represented by
    their title
    online. This command is typically used for worksheets and sections of
    textbooks.
  \item[\tt\bfseries\textbackslash practice] is for including Ximera documents
    that \textbf{do
      not include} a title, abstract, and \verb!\maketitle!. They will be
    represented by a number  based on their
    order in \verb!xourse! file. This command is used for lists of exercises
    and problem
    banks.
\end{description}

In \verb!aFirstStepInXimera.tex! we write

\begin{verbatim}
\documentclass{xourse} 
\input{preamble} %% Loads the graphics path
\author{Wim Obbels \and Bart Snapp}
\title{A First Step in Ximera}
\begin{document}
\begin{abstract}
    A simple collection of Ximera activities, 
    to be deployed online.
\end{abstract}
\maketitle
\activity{basics/basicWorksheet}
\activity{basics/graphicsInteractives}
\practice{exercises/answer}
\practice{exercises/multipleChoice}
\practice{exercises/selectAll}
\practice{exercises/wordChoice}
\practice{exercises/hintsAndFollowUp}
\end{document}
\end{verbatim}
Note how we give the paths to the exercises.

\section{Preambles, input paths, and graphics paths}

The Ximera documentclass comes with many packages preloaded:
\verb!enumitem!, 
\verb!titlesec!, 
\verb!titletoc!, 
\verb!titling!, 
\verb!url!, 
\verb!xcolor!, 
\verb!tikz!, 
\verb!pgfplots!, 
\verb!fancyvrb!, 
\verb!forloop!, 
\verb!environ!, 
\verb!amssymb!, 
\verb!amsmath!, 
\verb!amsthm!, 
\verb!xifthen!, 
\verb!multido!, 
\verb!listings!, 
\verb!xkeyval!, 
\verb!comment!, 
\verb!gettitlestring!, 
\verb!nameref!, 
\verb!epstopdf!, 
\verb!hyperref!.

The documentclass also provides support for the following theorem-like
environments:
\verb!algorithm!, \verb!axiom!, \verb!claim!, \verb!conclusion!,
\verb!condition!, \verb!conjecture!, \verb!corollary!, \verb!criterion!,
\verb!definition!, \verb!example!, \verb!explanation!, \verb!exercise!,
\verb!exploration!,
\verb!fact!, \verb!formula!, \verb!hypothesis!, \verb!idea!, \verb!lemma!,
\verb!model!,
\verb!notation!, \verb!observation!, \verb!paradox!, \verb!problem!,
\verb!procedure!,
\verb!proposition!, \verb!question!, \verb!remark!, \verb!solution!,
\verb!summary!, \verb!template!, \verb!theorem!, \verb!warning!.


We can add functionality and generality, via user defined commands, to the document via a preamble, or macros, document. 
The purpose of a preamble is to ensure \textbf{all files compile consistently,
  it is not for cosmetic changes.} A typically preamble might contain things
like:

\begin{verbatim}
\newcommand{\R}{\mathbb{R}}
\newcommand{\d}{\, d}
\end{verbatim}

\begin{warning}
  Cosmetic changes to Ximera environments will result in unpredictable behavior
  online.
\end{warning}

Since every \verb!*.tex! file with a \verb!\documentclass! must compile, the preamble file must be accessible  by all files.
\begin{center}%%DIAGRAM OF FILE STRUCTURE
  \scalebox{.7}{
    \begin{tikzpicture}
      % Define styles for nodes
      \tikzstyle{document} = [anchor=north west,draw, rounded corners,
      rectangle,
      minimum width=3cm,fill=white, minimum height=.8cm, ultra
      thick,font=\ttfamily]
      \tikzstyle{folder} = [anchor=north west,draw, rectangle, rounded corners,
      minimum width=4cm,fill=white, minimum height=2.8cm, ultra
      thick,font=\ttfamily]

      % Thick grey lines
      \draw[line width=200pt,white!85!black,line cap=round] (2,1.5) -- (2,-4);
      \draw[line width=200pt,white!85!black,line cap=round] (10,1.5) --
      (10,-4);

      % Connections
      \draw[ultra thick] (2,-1.5) -- (8,2.6);
      \draw[ultra thick] (2,-1.5) -- (8,1.6);
      \draw[ultra thick] (2,-1.5) -- (8,.6);

      \draw[ultra thick] (2,-3.5) -- (8,-.4);
      \draw[ultra thick] (2,-3.5) -- (8,-1.4);
      \draw[ultra thick] (2,-3.5) -- (8,-2.4);
      \draw[ultra thick] (2,-3.5) -- (8,-3.4);
      \draw[ultra thick] (2,-3.5) -- (8,-4.4);
      \draw[ultra thick] (2,-3.5) -- (8,-5.4);

      % Symbols at top
      \node at (2,4) {\Huge \tt ./};
      \node at (10,4) {\Huge \tt ../};

      % Define the folders at top level
      \node[document] at (0,3) {preamble.tex};
      \node[document] at (0,2) {aFirstStepInXimera.tex};
      \node[folder] at (0,1) {basics};
      \node[] at (2,-1) {(folder)};
      \node[folder] at (0,-2) {exercises};
      \node[] at (2,-4) {(folder)};

      % Define the documents in the basics folder
      \node[document] at (8,3) {basicWorksheet.tex};
      \node[document] at (8,2) {missionPatch.jpg};
      \node[document] at (8,1) {graphicsInteractives.tex};

      % Define the documents in the exercises folder
      \node[document] at (8,0) {exerciseList.tex};
      \node[document] at (8,-1) {answer.tex};
      \node[document] at (8,-2) {multipleChoice.tex};
      \node[document] at (8,-3) {selectAll.tex};
      \node[document] at (8,-4) {wordChoice.tex};
      \node[document] at (8,-5) {hintsAndFollowUp.tex};

      % paths at bottom
      \node at (2,-5.5) {\tt\textbackslash input\{./preamble\}};
      \node at (2,-6) {or};
      \node at (2,-6.5) {\tt\textbackslash input\{preamble\}};
      \node at (10,-6.5) {\tt\textbackslash input\{../preamble\}};
    \end{tikzpicture}}
\end{center}
In this diagram, we attempt to show how one should modify the inputs of the
preamble based on the directory structure.

\paragraph{Graphics paths} help \verb!\xourse! files find images. 
We used \verb!\includegraphics! in \texttt{basicWorkSheet.tex} with code like:
\begin{verbatim} 
\begin{center}
  \includegraphics[width=5cm]{missionPatch.jpg}
\end{center}
\end{verbatim}
In this case, \texttt{basicWorkSheet.tex}  and \verb!missionPatch.jpg! are both in the folder
\texttt{basics}. However, when
this document is compiled via a \verb!xourse! document, the \LaTeX\ compiler
looks for the image \textit{at the level of the
  \texttt{aFirstStepInXimera.tex}}.
\begin{center}%%DIAGRAM OF FILE STRUCTURE
  \scalebox{.7}{
    \begin{tikzpicture}
      % Define styles for nodes
      \tikzstyle{document} = [anchor=north west,draw, rounded corners,
      rectangle,
      minimum width=3cm,fill=white, minimum height=.8cm, ultra
      thick,font=\ttfamily]
      \tikzstyle{folder} = [anchor=north west,draw, rectangle, rounded
      corners,
      minimum width=4cm,fill=white, minimum height=2.8cm, ultra
      thick,font=\ttfamily]

      % Thick grey lines
      \draw[line width=200pt,white!85!black,line cap=round] (2,0) -- (2,1);
      \draw[line width=200pt,white!85!black,line cap=round] (10,0)--(10,1);

      % Connections
      \draw[ultra thick] (2,-1.5) -- (8,2.6);
      \draw[ultra thick] (2,-1.5) -- (8,1.6);
      \draw[ultra thick] (2,-1.5) -- (8,.6);

      % Define the folders at top level
      \node[document] at (0,3) {preamble.tex};
      \node[document] at (0,2) {aFirstStepInXimera.tex};
      \node[folder] at (0,1) {basics};
      \node[] at (2,-1) {(folder)};

      % Define the documents in the basics folder
      \node[document] at (8,3) {basicWorksheet.tex};
      \node[document] at (8,2) {missionPatch.jpg};
      \node[document] at (8,1) {graphicsInteractives.tex};

    \end{tikzpicture}}
\end{center}
Since there is no file \verb!missionPatch.jpg! (which is on the right) at the
level of the
\verb!xourse! document (on the left) the compilation will fail. To solve this
problem we use the preamble to append the graphics path. If we add (and in
reality we did!) this
\begin{verbatim}
%% Where to find images
\graphicspath{  %% When looking for images,
{./}            %% look first at your level,
{./basics/}     %% then in this folder,
}    
\end{verbatim}
to our preamble, then when compiling \verb!aFirstStepInXimera.tex!, the
compiler will know where to look.

\paragraph{Input paths} allow you to load other documents into your files. 
This is a less common use case, but we'll mention it here. You can surely avoid the use of such files with an enhanced preamble. However, for this document, we
needed to input various TikZ files to help us draw our diagrams. Hence we needed to
add the location of these files to our input path. We did this in our preamble
the following way:
\begin{verbatim}
%% Where to look for inputs
\makeatletter     %% make "@" a letter-character
\def\input@path{  %% When looking for files,
{./}              %% look first at your level
{./coverArt/}     %% then in this folder,
{./introduction/} %% then in this folder,
}
\makeatother      %% make "@" an other-character
\end{verbatim}
With this said, modifying input paths is more of an advanced feature and one should be careful.
\end{document}
